# Search DSL Overview

The primary way to interact with Elasticsearch using this library is by constructing a `Search` request. A `Search` request is a list of `SearchBody` elements that define various aspects of your search.

```fsharp
open Elasticsearch.FSharp.DSL

let mySearchRequest =
    Search [
        // ... various SearchBody elements like Query, Sort, Aggs, etc.
    ]
```

The `SearchBody` type can include:

- `Query of QueryBody`: Defines the query to execute. See [Queries](./queries/index.md) for details.
- `Sort of SortBody list`: Specifies how to sort the results. See [Sorting](./sort.md).
- `Aggs of AggsFieldsBody list`: Defines aggregations to perform on the search results. See [Aggregations](./aggregations.md).
- `From of int` and `Size of int`: Control pagination. See [Pagination](./pagination.md).
- `ScriptFields of ScriptFieldsBody list`: Retrieve values generated by scripts. See [Script Fields](./script-fields.md).
- `Script of ScriptBody`: Defines a top-level script for the search context.
- `Source_ of SourceBody`: Control which parts of the source document are returned. See [Source Filtering](./source-filtering.md).
- `TrackTotalHits of bool`: Controls whether the total number of hits matching the query should be accurately tracked.
    - Setting to `true` ensures `hits.total.value` is the exact count, which can be performance intensive.
    - Setting to `false` allows Elasticsearch to stop counting early if the number of hits is large (e.g., above 10,000), and `hits.total.relation` will be "gte".
    - If not specified, Elasticsearch defaults usually behave like `false` or track up to a certain limit (e.g., 10,000 hits).
- `Raw of Key: string * Value: string`: Allows you to include raw JSON key-value pairs in the search body.

The `QueryBody` type (used within `Query (...)`) can include:
- `MatchAll`
- `MatchNone`
- `Ids of string list`
- `Bool of BoolQuery list`
- `Match of MatchQuery`
- `Term of TermQuery`
- `Terms of TermsQuery`
- `Range of RangeQuery`
- `Wildcard of WildcardQuery`
- `Script of ScriptBody`
- `MultiMatch of MultiMatchQuery`
- `MatchPhrasePrefix of MatchPhrasePrefixQuery`
- `Nested of NestedQuery`
- `Exists of FieldName: string`
- `Raw of RawString: string`
- `TypeEquals of string`


## Basic Query Example

All queries are done by specifying a `Query` value in the list of `SearchBody` elements:

```fsharp
let query =
    Search [
        Query MatchAll
    ]
```

This query would produce the following JSON (using `Elasticsearch.FSharp.DSL.Serialization.toJson`):

```json
{
  "query": {
    "match_all": {}
  }
}
```

Explore the other sections to learn more about each component of the Search DSL.
